<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulador de Investimentos</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --primary:#2563eb;
  --dark:#0f172a;
  --card:#ffffff;
  --success:#16a34a;
}

body{
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:var(--dark);
  color:#fff;
}

.container{
  max-width:1000px;
  margin:auto;
  padding:15px;
}

h1{
  text-align:center;
  margin-bottom:20px;
  margin-top:10px;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}

.card{
  background:var(--card);
  color:#000;
  padding:15px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

input, select{
  width:92%;
  padding:10px;
  margin-bottom:15px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:15px;
  font-weight:bold;
  color:darkgreen;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:var(--primary);
  color:#fff;
  font-size:16px;
  cursor:pointer;
  font-weight:bold;
}

button:hover{
  opacity:0.9;
}

.resumo{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:15px;
  margin-top:20px;
}

.resumo div{
  background:#1e293b;
  padding:10px;
  border-radius:12px;
  text-align:center;
  border:1px solid green;
}

.resumo strong{
  display:block;
  font-size:18px;
  margin-top:5px;
  color:var(--success);
}

@media(max-width:800px){
  .grid{
    grid-template-columns:1fr;
  }
  .resumo{
    grid-template-columns:1fr;
  }
}
</style>
</head>
<body>

<div class="container">
<h1>ðŸ’° Simulador Profissional de Investimentos</h1>

<div class="grid">
<div class="card">

<label>Capital Inicial (R$)</label>
<input type="number" id="capital" value="1000">

<label>Aporte Mensal (R$)</label>
<input type="number" id="aporte" value="500">

<label>Taxa (%)</label>
<input type="number" id="taxa" value="12">

<label>Tipo de Taxa</label>
<select id="tipoTaxa">
<option value="anual">Anual</option>
<option value="mensal">Mensal</option>
</select>

<label>PerÃ­odo (meses)</label>
<input type="number" id="meses" value="12">

<button onclick="calcular()">Calcular Investimento</button>

</div>

<div class="card" style="padding: 5px">
<canvas id="grafico"></canvas>
</div>
</div>

<div class="resumo">
<div>Valor Final<strong id="valorFinal"></strong></div>
<div>Total Investido<strong id="totalInvestido"></strong></div>
<div>Total em Juros<strong id="totalJuros"></strong></div>
</div>
<div class="card" style="margin-top:20px;">
  <h3 style="margin-top:0;">ðŸ“‹ Tabela MÃªs a MÃªs</h3>
  <div style="overflow-x:auto;">
    <table id="tabela" style="width:100%; border-collapse:collapse; font-size:14px;">
      <thead>
        <tr style="background:#1e293b; color:#fff;">
          <th style="padding:10px;">MÃªs</th>
          <th style="padding:10px;">Investido</th>
          <th style="padding:10px;">Juros do MÃªs</th>
          <th style="padding:10px;">Total Acumulado</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

</div>

<script>
let chart;

function calcular(){

let capitalInput = document.getElementById("capital");
let aporteInput = document.getElementById("aporte");
let taxaInput = document.getElementById("taxa");
let mesesInput = document.getElementById("meses");
let tipoSelect = document.getElementById("tipoTaxa");

let capital = parseFloat(capitalInput.value) || 0;
let aporte = parseFloat(aporteInput.value) || 0;
let taxa = parseFloat(taxaInput.value) || 0;
let tipo = tipoSelect.value;
let meses = parseInt(mesesInput.value) || 0;

/* ConversÃ£o taxa anual â†’ mensal */
if(tipo === "anual"){
  taxa = Math.pow(1 + taxa/100, 1/12) - 1;
}else{
  taxa = taxa / 100;
}

let total = capital;
let totalInvest = capital;
let totalJ = 0;

let labels = [];
let dadosTotal = [];
let dadosInvestido = [];
let dadosJuros = [];

let tbody = document.querySelector("#tabela tbody");
tbody.innerHTML = "";

for(let i=1;i<=meses;i++){

  let juros = total * taxa;
  total += juros + aporte;
  totalInvest += aporte;
  totalJ += juros;

  labels.push("MÃªs " + i);

  dadosTotal.push(total);
  dadosInvestido.push(totalInvest);
  dadosJuros.push(totalJ);

  let linha = `
    <tr style="border-bottom:1px solid #ddd;">
      <td style="padding:8px; text-align:center;">${i}</td>
      <td style="padding:8px; text-align:center;">
        R$ ${totalInvest.toLocaleString("pt-BR",{minimumFractionDigits:2})}
      </td>
      <td style="padding:8px; text-align:center;">
        R$ ${juros.toLocaleString("pt-BR",{minimumFractionDigits:2})}
      </td>
      <td style="padding:8px; text-align:center;">
        R$ ${total.toLocaleString("pt-BR",{minimumFractionDigits:2})}
      </td>
    </tr>
  `;

  tbody.innerHTML += linha;
}

document.getElementById("valorFinal").innerHTML = 
  "R$ " + total.toLocaleString("pt-BR",{minimumFractionDigits:2});

document.getElementById("totalInvestido").innerHTML = 
  "R$ " + totalInvest.toLocaleString("pt-BR",{minimumFractionDigits:2});

document.getElementById("totalJuros").innerHTML = 
  "R$ " + totalJ.toLocaleString("pt-BR",{minimumFractionDigits:2});

if(chart) chart.destroy();

chart = new Chart(document.getElementById("grafico"), {
  type:'line',
  data:{
    labels:labels,
    datasets:[
      {
        label:"PatrimÃ´nio Total",
        data:dadosTotal,
        borderWidth:3,
        tension:0.3
      },
      {
        label:"Total Investido",
        data:dadosInvestido,
        borderWidth:2,
        tension:0.3
      },
      {
        label:"Total em Juros",
        data:dadosJuros,
        borderWidth:2,
        tension:0.3
      }
    ]
  },
  options:{
    responsive:true,
    plugins:{
      legend:{
        display:true,
        position:"bottom"
      }
    },
    scales:{
      y:{
        ticks:{
          callback: function(value){
            return "R$ " + value.toLocaleString("pt-BR");
          }
        }
      }
    }
  }
});

}
calcular();

/* Registro PWA */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>